<!DOCTYPE html>
<html><head>
<meta charset="utf-8"/>
<link rel="apple-touch-icon" href="favicon.png"/>
<link rel="shortcut icon" href="favicon.png"/>
<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto" />
<meta name="viewport" content="width=device-width"/>
<meta name="viewport" content="initial-scale=1.0"/>
<title>{{TITLE}}</title>
<style>
:root {
    --content-size: 100%;
    --word-pointer: pointer;
}

html,
body {
    height: 100%;
    margin: 0;
    padding: 0;
    border: 0;
    background-color: #333;
    color: #ccc;
    font-family: "Roboto", sans-serif;
    font-size: 12pt;
    box-sizing: border-box;
}

.overlay {
    position:fixed;
    background-color: rgba(0, 0, 0, .25);
    top:0;
    left:0;
    width:100%;
    height:100%;
}

.content {
    font-size: var(--content-size);
    padding: 10px;
    padding-top: 60px;
    padding-bottom: 30px;
}

.cols {
    display: flex;
    flex-flow: column;
}

.rows {
    display: flex;
    flex-flow: row;
}

@keyframes fade {
    0% {opacity: 0;transform:translateX(4em);}
    100% {opacity: 1;transform:translateX(0em);}
}

@-webkit-keyframes fade {
    0% {opacity: 0;transform:translateX(4em);}
    100% {opacity: 1;transform:translateX(0em);}
}

@keyframes unfade {
    0% {opacity: 1;transform:translateX(0em);}
    100% {opacity: 0;transform:translateX(4em);}
}

@-webkit-keyframes unfade {
    0% {opacity: 1;transform:translateX(0em);}
    100% {opacity: 0;transform:translateX(4em);}
}

.hideDrop {
    -webkit-animation: unfade 0.25s;
    animation: unfade 0.25s;
}

.showDrop {
    -webkit-animation: fade 0.25s;
    animation: fade 0.25s;
}

.dropdown {
    position: fixed;
    top: calc(62px - 10px);
    width: 10em;
    left: calc(100% - 10em);
    align-items: center;
    padding: 10px;
    line-height: 150%;
    background-color: #222;
    box-shadow: 0 1px 2px hsla(0,0%,0%,0.1), 0 1px 4px hsla(0, 0%, 0%, 0.1), 0 2px 8px hsla(0, 0%, 0%, 0.1);
}

.util {
    cursor: pointer;
    color: #bbf;
    overflow: hidden;
    width: 100%;
    display: block;
}

.util:hover {
    background-color: #559;
}

.header {
    align-items: center;
    background-color: #222;
    position: fixed;
    box-sizing: border-box;
    top: -10px;
    padding-top: 10px;
    left: 0;
    width: 100%;
    height: 62px;
    box-shadow: 0 1px 2px hsla(0,0%,0%,0.1), 0 1px 4px hsla(0, 0%, 0%, 0.1), 0 2px 8px hsla(0, 0%, 0%, 0.1);
}

.sel::before {
    content: "\2022\00a0";
}

.nosel::before {
    content: "\00a0\00a0";
}

.fill {
    flex: 100%;
}

.fillToEdge {
    height: 100%;
    width: 100%;
}

span.current {
    color:#fff;
    background:#833;
    cursor: var(--word-pointer);
    scroll-margin: calc(1.5em + 62px) 0 2.5em 0;
}

span.left {
    margin-left: -5px;
    padding-left: 5px;
    border-radius: 3px 0 0 3px;
}

span.right {
    border-radius: 0 3px 3px 0;
}

span.word {
    cursor: var(--word-pointer);
    scroll-margin: 2.5em 0;
}

p {
    padding:4px 0;
    margin-left: 2ch;
    text-indent: -2ch;
    margin-top: .1em;
    margin-bottom: .1em;
    line-height: 1.3;
}

p.current {
    background-color: #444;
    box-shadow:4px 0 0 #444, -2ch 0 0 #444;
    border-radius: 5px;
    scroll-margin: 2.5em 0;
}

@media only screen and (max-width: 600px) {
    :root {
        --extra_height: 1.3;
    }
    span.current {
        scroll-margin: calc(1.5em + (62px * var(--extra_height))) 0 2.5em 0;
    }
    .header {
        height: calc(62px * var(--extra_height));
    }
    .content {
        padding-top: calc(60px * var(--extra_height));
    }
    .playPause {
        transform: scale(1.9);
    }
    p {
        margin-left: 0;
        text-indent: 0;
    }
    p.current {
        box-shadow:4px 0 0 #444, -4px 0 0 #444;
    }
}
@media only screen and (min-width: 700px) {
    .content {
        width: 600px;
        margin-left: calc((100% - 600px) / 2);
    }
    p {
        margin-left: 0;
    }
}
.timecode {
    color: #aaa;
}

.speaker {
    color: #999;
    font-style: italic;
}

.hidden {
    display: none;
}

.playPause {
    margin-left: 1em;
    margin-right: 1em;
    margin-bottom: 5px;
    margin-top: 5px;
    cursor: pointer;
}

.play .forPause {
    display: none;
}

.slider {
    appearance: none;
    height: 15px;
    margin: 10px;
    border-radius: 5px;  
    outline: none;
    background: #444;
}

.slider::-webkit-slider-thumb {
    appearance: none;
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #bbf;
    cursor: pointer;
}

.slider::-moz-range-thumb {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: #bbf;
    cursor: pointer;
} 

.link {
    cursor: pointer;
    margin: 10px;
} 

.leftpad {
    margin: 10px;
}

input[type=button],input[type=submit],input[type=reset] {
    background-color: #444;
    border: none;
    color: #f8f8f2;
    padding: 2pt 20pt;
    text-decoration: none;
    cursor: pointer;
    font-family: Menlo,Monaco,Consolas,monospace;
    font-size: 12pt;
}

input[type="text"],input[type="number"],textarea {
    background-color: #000;
    color: #cec;
    font-family: Menlo,Monaco,Consolas,monospace;
    font-size: 12pt;
    margin: 3px;
    border-top-style: hidden;
    border-right-style: hidden;
    border-left-style: hidden;
    border-bottom-style: solid;
    border-bottom-width: 1px;
    border-bottom-color: #a8a8f2;
    padding: 2px;
}
</style>
<script>

function getParam(name, decode) {
    var ret = new URLSearchParams(location.search).get(name);
    if (ret !== null && decode) { ret = atob(ret); }
    return ret
}

var words = /* |SWords| */{WORDS_VAR}/* |EWords| */,
    wordID = "{{WORD_ID}}",
    byTime = [],
    paras = [],
    parasReady = false,
    lastHighlighted = null,
    isUserMoving = false,
    scrollState = [-1, -1, -1],
    playerLeftToLoad = 2,
    playerIsPlaying = false,
    jumpOnClick = true,
    autoScroll = true,
    wakeLock = null,
    isInterrupted = false,
    player = null,
    requestWakeLock = null;

function move(e) {
    if (!jumpOnClick) {
        return;
    }
    if (e.srcElement !== undefined) {
        e = e.srcElement.at;
    }
    if (playerLeftToLoad == -1) {
        var paused = player.paused;
        if (!paused) {
            play();
        }
        player.currentTime = e;
        if (!paused) {
            play();
        }
        updateScrolls();
    } else {
        player.newTarget = e;
        if (player.paused) {
            play();
        }
    }
};

document.addEventListener('keydown', e => {
    if (!e.altKey && !e.ctrlKey && !e.metaKey && !e.shiftKey) {
        if (document.getElementById("overlay").className === "overlay hidden") {
            if (e.code === 'Space') {
                e.preventDefault();
                play();
                return true;
            }

            if (new Set(['ArrowUp', 'ArrowDown']).has(e.code)) {
                e.preventDefault();
                var temp = null;
                if (temp === null && lastHighlighted !== null) {
                    temp = e.code === 'ArrowUp' ? lastHighlighted[0].para.previousSibling : lastHighlighted[lastHighlighted.length-1].para.nextSibling;
                }
                if (temp === null && parasReady) {
                    temp = paras[0];
                }
                if (temp !== null) {
                    temp = temp.childNodes;
                    for (var i = 0; i < temp.length; i++) {
                        if (temp[i].hasOwnProperty('at')) {
                            player.currentTime = (temp[i].at + temp[i].at) / 2;
                            return true;
                        }
                    }
                }
                return true;
            }
            else if (new Set(['ArrowLeft', 'ArrowRight']).has(e.code)) {
                e.preventDefault();
                if (lastHighlighted === null) {
                    var line = paras[0], temp = line.childNodes;
                    for (var i = 0; i < temp.length; i++) {
                        if (temp[i].hasOwnProperty('at')) {
                            var word = temp[i];
                            player.currentTime = (word.at + word.atEnd) / 2;
                            break
                        }
                    }
                } else {
                    player.currentTime = e.code === 'ArrowLeft' ? lastHighlighted[0].at - (1.0 * player.playbackRate) : lastHighlighted[lastHighlighted.length-1].atEnd + 0.1;
                }
                return true;
            }
        } else {
            if (e.code === 'Escape') {
                hideDrop();
                return true;
            }
        }
    }
    if (e.key === 's' && !e.altKey && e.ctrlKey && !e.metaKey && !e.shiftKey) {
        e.preventDefault();
        showPos();
        return true;
    }
});

function pad(value, width=1, padChar='0') {
    value = Math.floor(value) + '';
    return value.length >= width ? value : new Array(width - value.length + 1).join(padChar) + value;
};

function getTick(at) {
    return pad(at / 3600) + ":" + pad((at % 3600) / 60, 2) + ":" + pad(at % 60, 2);
}

function play() {
    if (playerLeftToLoad >= 0) {
        playerLeftToLoad = 0;
        playerLoaded();
    }

    if (player.paused) {
        player.play();
        if ('audioSession' in navigator) {
            const as = navigator.audioSession;
            if (as) {
                as.type = 'playback';
            }
        }
    } else {
        player.pause();
    }
}

function posChange() {
    move(document.getElementById("pos").value / 10);
}

function posMoving() {
    isUserMoving = true;
}

function posMoved() {
    isUserMoving = false;
}

function bisect(target, handler, invert) {
    var start = 0, end = target.length - 1;
    var valid = null;
    while (start != end) {
        var mid = Math.floor((start + end) / 2);
        if (handler(target[mid])) {
            if (invert) {
                end = mid;
            } else {
                start = mid + 1;
            }
            valid = target[mid];
        } else {
            if (invert) {
                start = mid + 1;
            } else {
                end = mid;
            }
        }
    }
    if (handler(target[start])) {
        return target[start];
    } else {
        return valid;
    }
}

function updateScrolls() {
    if (!parasReady) {
        return;
    }

    var pos = document.getElementById("pos"), loc = pos.value / pos.max, 
        temp = [window.innerHeight, paras[paras.length - 1].getBoundingClientRect().bottom, loc];
    if (temp[0] == scrollState[0] && temp[1] == scrollState[1] && temp[2] == scrollState[2]) {
        return;
    }
    scrollState = temp;

    var pageStart = bisect(paras, e => e.getBoundingClientRect().bottom >= 50, true), 
        pageEnd = bisect(paras, e => e.getBoundingClientRect().top <= window.innerHeight, false);

    if (pageStart !== null && pageEnd !== null) {
        function calcPerc(e, invert) {
            var rect = e.getBoundingClientRect(), 
                perc = (invert ? (window.innerHeight - rect.top) : (rect.bottom - 50)) / (rect.bottom - rect.top);
            perc = perc < 0 ? 0 : (perc > 1 ? 1 : perc);
            if (invert) {
                return ((e.end * perc) + (e.start * (1 - perc)));
            } else {
                return ((e.start * perc) + (e.end * (1 - perc)));
            }
        }
        
        pageStart = calcPerc(pageStart, false) ;
        pageEnd = calcPerc(pageEnd, true) ;

        var done = '#555', togo = '#333', page = '#66a', view = 3;
        if (pageEnd <= loc) {
            view = 1;
        } else if (pageStart >= loc) {
            view = 2;
        }

        loc = `calc((100% - 26px) * ${loc} + 13px)`;
        pageStart = `calc((100% - 26px) * ${pageStart} + 13px)`;
        pageEnd = `calc((100% - 26px) * ${pageEnd} + 13px)`;
        var temp = '';
        if (view == 1) {
            temp = `,${done} 0% ${pageStart},${page} ${pageStart} ${pageEnd},${done} ${pageStart} ${loc},${togo} ${loc} 100%`;
        } else if (view == 2) {
            temp = `,${done} 0% ${loc},${togo} ${loc} ${pageStart},${page} ${pageStart} ${pageEnd},${togo} ${pageEnd} 100%`;
        } else {
            temp = `,${done} 0% ${pageStart},${page} ${pageStart} ${pageEnd},${togo} ${pageEnd} 100%`;
        }
        pos.style.background = 'linear-gradient(to right' + temp + ')';
    }
}

function posChanging() {
    updateScrolls();
    document.getElementById("posText").innerHTML = getTick(pos.value / 10) + '<br><font size="-1">' + ('-' + getTick((pos.max - pos.value) / 10)) + "</font>";
}

function hideDrop() {
    var drop = document.getElementById("dropdown");
    if (drop.className == "dropdown showDrop") {
        drop.className = "dropdown hideDrop";
    }
    var setpos = document.getElementById("setpos");
    if (setpos.className == "dropdown showDrop") {
        setpos.className = "dropdown hideDrop";
    }
    var overlay = document.getElementById("overlay");
    overlay.className = "overlay hidden";
}

function posSelected(e) {
    hideDrop();
    e.preventDefault = true;
    var newPos = document.getElementById('enteredPos').value;
    if (newPos.includes(":") || newPos.includes(".") || newPos.includes("-") || newPos.includes(",") || newPos.includes(" ")) {
        newPos = newPos.replace(/[,. -]/g, ":");
        newPos = newPos.split(":");
        if (newPos.length == 3 || newPos.length == 2) {
            var h = parseInt(newPos.length == 3 ? newPos[0] : '0'), 
                m = parseInt(newPos.length == 3 ? newPos[1] : newPos[0]), 
                s = parseInt(newPos.length == 3 ? newPos[2] : newPos[1]);
            if (h >= 0 && h <= 99 && m >= 0 && m <= 59 && s >= 0 && s <= 59) {
                var temp = h * 3600 + m * 60 + s;
                if (temp >= 0 && temp <= 43200) {
                    move(h * 3600 + m * 60 + s);
                }
            }
        }
    } else {
        var temp = parseFloat(newPos);
        if (temp >= 0 && temp <= 60) {
            move(temp * 60);
        } else if (temp > 60 && temp <= 43200) {
            move(temp);
        }
    }
    hideDrop();
    return false;
}

function showLinks() {
    var drop = document.getElementById("dropdown");
    if (!drop.hasOwnProperty('eventSetup')) {
        drop.eventSetup = true;
        drop.addEventListener('animationend', (e) => {
            if (drop.className == "dropdown hideDrop") {
                drop.className = "dropdown hideDrop hidden";
            }
        });
    }

    if (drop.className == "dropdown showDrop") {
        hideDrop();
    } else {
        drop.className = "dropdown showDrop";
        var overlay = document.getElementById("overlay");
        overlay.className = "overlay";
    }
}

function showPos() {
    var enteredPos = document.getElementById('enteredPos');
    enteredPos.value = getTick(player.currentTime);
    var setpos = document.getElementById("setpos");
    if (!setpos.hasOwnProperty('eventSetup')) {
        setpos.eventSetup = true;
        setpos.addEventListener('animationend', (e) => {
            if (setpos.className == "dropdown hideDrop") {
                setpos.className = "dropdown hideDrop hidden";
            }
        });
    }
    var drop = document.getElementById("dropdown");
    drop.className = "dropdown hideDrop hidden";

    setpos.className = "dropdown showDrop";
    var overlay = document.getElementById("overlay");
    overlay.className = "overlay";

    enteredPos.focus();
    enteredPos.select();
}

var clipboard = (function(window, document, navigator) {
    var textArea, copy;

    function isOS() {
        return navigator.userAgent.match(/ipad|iphone/i);
    }

    function createTextArea(text) {
        textArea = document.createElement('textArea');
        textArea.value = text;
        document.body.appendChild(textArea);
    }

    function selectText() {
        var range, selection;

        if (isOS()) {
            range = document.createRange();
            range.selectNodeContents(textArea);
            selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            textArea.setSelectionRange(0, 999999);
        } else {
            textArea.select();
        }
    }

    function copyToClipboard() {        
        document.execCommand('copy');
        document.body.removeChild(textArea);
    }

    copy = function(text) {
        createTextArea(text);
        selectText();
        copyToClipboard();
    };

    return {
        copy: copy
    };
})(window, document, navigator);

function getLink() {
    var uri = window.location.href.split("#")[0] + "#" + Math.floor(player.currentTime * 10);
    clipboard.copy(uri);
    alert("Link copied to clipboard");
    hideDrop();
}

function onAutoScroll() {
    autoScroll = !autoScroll;
    document.getElementById('auto_scroll').className = (autoScroll ? "util sel" : "util nosel");
}

function onClickToJump() {
    jumpOnClick = !jumpOnClick;
    document.getElementById('click_to_jump').className = (jumpOnClick ? "util sel" : "util nosel");
    document.querySelector(':root').style.setProperty('--word-pointer', jumpOnClick ? 'pointer' : 'auto');
}

function setSpeed(val, target) {
    player.playbackRate = val;
    var other = ['0_5', '1_0', '1_25', '1_5', '1_75', '2_0', '2_5', '3_0'];
    for (var i = 0; i < other.length; i++) {
        document.getElementById('speed_' + other[i]).className = (other[i] == target ? "util sel" : "util nosel");
    }
}

function setSize(val, target) {
    var perc = document.documentElement.scrollTop / document.documentElement.scrollHeight;
    document.documentElement.style.setProperty("--content-size", val + "%");
    document.documentElement.scrollTop = document.documentElement.scrollHeight * perc;
    var other = ['100', '125', '150', '200'];
    for (var i = 0; i < other.length; i++) {
        document.getElementById('size_' + other[i]).className = (other[i] == target ? "util sel" : "util nosel");
    }
}

function playerLoaded() {
    if (playerLeftToLoad > 0) {
        playerLeftToLoad--;
    }

    if (playerLeftToLoad == 0) {
        playerLeftToLoad = -1;

        if ('audioSession' in navigator) {
            const as = navigator.audioSession;
            if (as) {
                as.type = 'playback';
                as.addEventListener("onstatechange", () => {
                    if (as.state === 'interrupted') {
                        isInterrupted = true;
                        if (!player.paused) {
                            player.pause();
                        }
                    }
                    if (as.state === 'inactive') {
                        if (isInterrupted) {
                            isInterrupted = false;
                            if (player.paused) {
                                play();
                            }
                        }
                    }
                });
            }
        }

        if ('mediaSession' in navigator) {
            const ms = navigator.mediaSession;
            if (ms) {
                var title = "Podcast Episode", album = "Podcasts";
                if (typeof titleMeta !== 'undefined' && titleMeta !== null && titleMeta.length > 0) {
                    var temp = JSON.parse(atob(titleMeta));
                    if (temp['link_title'].length > 0) {
                        title = temp['link_title'];
                    }
                    if (temp['feed_title'].length > 0) {
                        album = temp['feed_title'];
                    }
                }
                ms.metadata = new MediaMetadata({
                    title: title,
                    album: album,
                    artist: album,
                    artwork: [
                        { src: "data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+LnN0MHtkaXNwbGF5Om5vbmU7fS5zdDF7ZmlsbDojREVGRkZFO30uc3Qye2ZpbGw6IzAwNDM1ODt9LnN0M3tmaWxsOiMwNEJGQkY7fS5zdDR7ZmlsbDojQkVEQjM5O308L3N0eWxlPjxnIGlkPSJMYXllcl8xIi8+PGcgY2xhc3M9InN0MCIgaWQ9IkxheWVyXzMiLz48ZyBjbGFzcz0ic3QwIiBpZD0iTGF5ZXJfNSIvPjxnIGlkPSJMYXllcl80Ij48Zz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzAxLjczMSwyOTcuODI2djIzLjkzOWMwLDE2LjMxNC0xMy4yMjUsMjkuNTM5LTI5LjUzOSwyOS41MzloLTk3LjM2NWMwLDAsMS4wNDMsMTguMjYxLDQxLjczOSwxOC4yNjEgczkxLjMwNCwwLDkxLjMwNCwwczIwLjk0LTkuNjIsMjIuNzMxLTI1LjA0M2MxLjc5MS0xNS40MjMsMC4yNDYtNTIuOTQ5LDAuMjQ2LTUyLjk0OUwzMDEuNzMxLDI5Ny44MjZ6Ii8+PGc+PHBhdGggY2xhc3M9InN0MSIgZD0iTTI1My41MTQsMTE2LjgyNmMyNi41ODcsMCw0OC4yMTcsMjEuNjMsNDguMjE3LDQ4LjIxN3YxMjEuNTI5djExLjI1M2gzMC44MjZWMTY2LjYyNyBjMCwwLTQuMDc5LTQyLjk3NC0yOC4zNC00OS44MDFjLTI0LjI2MS02LjgyNi01MC43MDQtNC40NzgtNTAuNzA0LTQuNDc4VjExNi44MjZ6Ii8+PC9nPjxyZWN0IGNsYXNzPSJzdDEiIGhlaWdodD0iMTUuMzc0IiB3aWR0aD0iNTIuMzQ1IiB4PSIyMjUuMzg2IiB5PSI0MDguOTU3Ii8+PGc+PHBhdGggY2xhc3M9InN0MyIgZD0iTTI1MS41NTgsNDQ0LjQzNWMtMi43NjEsMC01LTIuMjM5LTUtNXMyLjIzOS01LDUtNWM4Ljk3NCwwLDE3LjM0NC00LjgzMSwyMS44NDUtMTIuNjA4IGMxLjM4My0yLjM4OSw0LjQ0Mi0zLjIwNyw2LjgzMi0xLjgyM2MyLjM5LDEuMzgzLDMuMjA3LDQuNDQyLDEuODIzLDYuODMyQzI3NS43NzYsNDM3LjY5MSwyNjQuMDg5LDQ0NC40MzUsMjUxLjU1OCw0NDQuNDM1eiIvPjwvZz48Zz48cGF0aCBjbGFzcz0ic3QzIiBkPSJNMjUxLjU1OCw0NDQuNDM1Yy0xMi41MywwLTI0LjIxNy02Ljc0NC0zMC41LTE3LjZjLTEuMzgzLTIuMzktMC41NjctNS40NDksMS44MjMtNi44MzIgYzIuMzkxLTEuMzgzLDUuNDQ5LTAuNTY2LDYuODMyLDEuODIzYzQuNTAxLDcuNzc3LDEyLjg3MSwxMi42MDgsMjEuODQ1LDEyLjYwOGMyLjc2MSwwLDUsMi4yMzksNSw1IFMyNTQuMzE5LDQ0NC40MzUsMjUxLjU1OCw0NDQuNDM1eiIvPjwvZz48Zz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNMjk0LjgxOSw0MTQuMjE3aC04Ni41MjJjLTQzLjE3NywwLTc4LjMwNC0zNS4xMjctNzguMzA0LTc4LjMwNHYtMjIuMDc3YzAtNy4xNjgsNS44MzItMTMsMTMtMTNoMTQuMTMyIGMyLjc2MSwwLDUsMi4yMzksNSw1cy0yLjIzOSw1LTUsNWgtMTQuMTMyYy0xLjY1NCwwLTMsMS4zNDYtMywzdjIyLjA3N2MwLDM3LjY2MywzMC42NDEsNjguMzA0LDY4LjMwNCw2OC4zMDRoODYuNTIyIGMzNy42NjMsMCw2OC4zMDQtMzAuNjQxLDY4LjMwNC02OC4zMDR2LTIyLjA3N2MwLTEuNjU0LTEuMzQ2LTMtMy0zaC0xNC4xMzJjLTIuNzYxLDAtNS0yLjIzOS01LTVzMi4yMzktNSw1LTVoMTQuMTMyIGM3LjE2OCwwLDEzLDUuODMyLDEzLDEzdjIyLjA3N0MzNzMuMTI0LDM3OS4wOSwzMzcuOTk3LDQxNC4yMTcsMjk0LjgxOSw0MTQuMjE3eiIvPjwvZz48Zz48cGF0aCBjbGFzcz0ic3QzIiBkPSJNMjA4Ljg2MywxODguNDUzaC0zNi41OTJjLTIuNzYxLDAtNS0yLjIzOS01LTVzMi4yMzktNSw1LTVoMzYuNTkyYzYuNTIxLDAsMTEuODI2LTUuMzA1LDExLjgyNi0xMS44MjYgYzAtNi41MjEtNS4zMDUtMTEuODI2LTExLjgyNi0xMS44MjZoLTM0LjM2NWMtMi43NjEsMC01LTIuMjM5LTUtNXMyLjIzOS01LDUtNWgzNC4zNjVjMTIuMDM1LDAsMjEuODI2LDkuNzkxLDIxLjgyNiwyMS44MjYgQzIzMC42ODgsMTc4LjY2MiwyMjAuODk3LDE4OC40NTMsMjA4Ljg2MywxODguNDUzeiIvPjwvZz48Zz48cGF0aCBjbGFzcz0ic3QzIiBkPSJNMzMwLjg0NiwxODguNDUzaC0zNi41OTJjLTEyLjAzNSwwLTIxLjgyNi05Ljc5MS0yMS44MjYtMjEuODI2YzAtMTIuMDM1LDkuNzkxLTIxLjgyNiwyMS44MjYtMjEuODI2aDM0LjM2NSBjMi43NjEsMCw1LDIuMjM5LDUsNXMtMi4yMzksNS01LDVoLTM0LjM2NWMtNi41MjEsMC0xMS44MjYsNS4zMDUtMTEuODI2LDExLjgyNmMwLDYuNTIxLDUuMzA1LDExLjgyNiwxMS44MjYsMTEuODI2aDM2LjU5MiBjMi43NjEsMCw1LDIuMjM5LDUsNVMzMzMuNjA3LDE4OC40NTMsMzMwLjg0NiwxODguNDUzeiIvPjwvZz48Zz48cGF0aCBjbGFzcz0ic3QzIiBkPSJNMzMwLjg0NiwyNTguNDc4aC0zNi41OTJjLTEyLjAzNSwwLTIxLjgyNi05Ljc5MS0yMS44MjYtMjEuODI2YzAtMTIuMDM1LDkuNzkxLTIxLjgyNiwyMS44MjYtMjEuODI2aDM2LjU5MiBjMi43NjEsMCw1LDIuMjM5LDUsNXMtMi4yMzksNS01LDVoLTM2LjU5MmMtNi41MjEsMC0xMS44MjYsNS4zMDUtMTEuODI2LDExLjgyNmMwLDYuNTIxLDUuMzA1LDExLjgyNiwxMS44MjYsMTEuODI2aDM2LjU5MiBjMi43NjEsMCw1LDIuMjM5LDUsNVMzMzMuNjA3LDI1OC40NzgsMzMwLjg0NiwyNTguNDc4eiIvPjwvZz48Zz48cGF0aCBjbGFzcz0ic3QzIiBkPSJNMjA4Ljg2MywyNTguNDc4aC0zNi41OTJjLTIuNzYxLDAtNS0yLjIzOS01LTVzMi4yMzktNSw1LTVoMzYuNTkyYzYuNTIxLDAsMTEuODI2LTUuMzA1LDExLjgyNi0xMS44MjYgYzAtNi41MjEtNS4zMDUtMTEuODI2LTExLjgyNi0xMS44MjZoLTM2LjU5MmMtMi43NjEsMC01LTIuMjM5LTUtNXMyLjIzOS01LDUtNWgzNi41OTJjMTIuMDM1LDAsMjEuODI2LDkuNzkxLDIxLjgyNiwyMS44MjYgQzIzMC42ODgsMjQ4LjY4NywyMjAuODk3LDI1OC40NzgsMjA4Ljg2MywyNTguNDc4eiIvPjwvZz48Zz48Zz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNMjk4Ljg0NiwzNzUuODdoLTk0LjU3NmMtMjAuNDAyLDAtMzctMTYuNTk4LTM3LTM3di0xNC43NzFjMC0yLjc2MSwyLjIzOS01LDUtNXM1LDIuMjM5LDUsNXYxNC43NzEgYzAsMTQuODg4LDEyLjExMiwyNywyNywyN2g5NC41NzZjMTQuODg4LDAsMjctMTIuMTEyLDI3LTI3di0xNC43NzFjMC0yLjc2MSwyLjIzOS01LDUtNXM1LDIuMjM5LDUsNXYxNC43NzEgQzMzNS44NDYsMzU5LjI3MSwzMTkuMjQ4LDM3NS44NywyOTguODQ2LDM3NS44N3oiLz48L2c+PGc+PHBhdGggY2xhc3M9InN0MiIgZD0iTTMzMC44NDYsMjkxLjU3M2MtMi43NjEsMC01LTIuMjM5LTUtNVYxNjUuMDQzYzAtMjYuNTg3LTIxLjYzLTQ4LjIxNy00OC4yMTctNDguMjE3aC01Mi4xNDEgYy0yNi41ODcsMC00OC4yMTcsMjEuNjMtNDguMjE3LDQ4LjIxN3YxMjEuNTI5YzAsMi43NjEtMi4yMzksNS01LDVzLTUtMi4yMzktNS01VjE2NS4wNDNjMC0zMi4xMDEsMjYuMTE2LTU4LjIxNyw1OC4yMTctNTguMjE3IGg1Mi4xNDFjMzIuMTAxLDAsNTguMjE3LDI2LjExNiw1OC4yMTcsNTguMjE3djEyMS41MjlDMzM1Ljg0NiwyODkuMzM0LDMzMy42MDcsMjkxLjU3MywzMzAuODQ2LDI5MS41NzN6Ii8+PC9nPjwvZz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNNDg3LjU1OCwxNDYuNzIxSDM4Mi4wMjljLTExLjU4LDAtMjEsOS40Mi0yMSwyMXY2Ni43MTljMCw1LjUyNywyLjE0NSwxMC43NDIsNS45NTcsMTQuNjQ2djkuOTc5IGMwLDMuNTU5LDEuOTc5LDYuNzU0LDUuMTY2LDguMzM4YzEuMzI1LDAuNjU5LDIuNzQ1LDAuOTgzLDQuMTU3LDAuOTgzYzEuOTg1LDAsMy45NTItMC42NDEsNS42MS0xLjg5NmwxNC41OTctMTEuMDQ5aDkxLjA0MiBjMTEuNTgsMCwyMS05LjQyLDIxLTIxdi02Ni43MTlDNTA4LjU1OCwxNTYuMTQxLDQ5OS4xMzgsMTQ2LjcyMSw0ODcuNTU4LDE0Ni43MjF6Ii8+PHBhdGggY2xhc3M9InN0NCIgZD0iTTM0NS45OTEsMjgyLjU3M0gxNTcuMTI1Yy0yLjc2MSwwLTUsMi4yMzktNSw1djM2LjUyNmMwLDIuNzYxLDIuMjM5LDUsNSw1aDE4OC44NjZjMi43NjEsMCw1LTIuMjM5LDUtNSB2LTM2LjUyNkMzNTAuOTkxLDI4NC44MTIsMzQ4Ljc1MiwyODIuNTczLDM0NS45OTEsMjgyLjU3M3oiLz48Zz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNMzI1LjYwMSw1MDdIMTc3LjUxNGMtMi43NjEsMC01LTIuMjM5LTUtNWMwLTIwLjA3NywzMy45ODEtMzUuMjE3LDc5LjA0My0zNS4yMTcgczc5LjA0MywxNS4xNCw3OS4wNDMsMzUuMjE3QzMzMC42MDEsNTA0Ljc2MSwzMjguMzYyLDUwNywzMjUuNjAxLDUwN3oiLz48L2c+PGc+PHBhdGggY2xhc3M9InN0MyIgZD0iTTI1MS41NTgsNDYwLjYwOWMtMi43NjEsMC01LTIuMjM5LTUtNXYtMTYuMTc0YzAtMi43NjEsMi4yMzktNSw1LTVzNSwyLjIzOSw1LDV2MTYuMTc0IEMyNTYuNTU4LDQ1OC4zNywyNTQuMzE5LDQ2MC42MDksMjUxLjU1OCw0NjAuNjA5eiIvPjwvZz48Zz48Zz48cGF0aCBjbGFzcz0ic3Q0IiBkPSJNNDY2LjQwNSwxODguNDUzSDQwMC4wOGMtMi43NjEsMC01LTIuMjM5LTUtNXMyLjIzOS01LDUtNWg2Ni4zMjVjMi43NjEsMCw1LDIuMjM5LDUsNSBTNDY5LjE2NywxODguNDUzLDQ2Ni40MDUsMTg4LjQ1M3oiLz48L2c+PGc+PHBhdGggY2xhc3M9InN0NCIgZD0iTTQ2Ni40MDUsMjE5Ljk5N2gtMTIuOTEzYy0yLjc2MSwwLTUtMi4yMzktNS01czIuMjM5LTUsNS01aDEyLjkxM2MyLjc2MSwwLDUsMi4yMzksNSw1IFM0NjkuMTY3LDIxOS45OTcsNDY2LjQwNSwyMTkuOTk3eiIvPjwvZz48Zz48cGF0aCBjbGFzcz0ic3Q0IiBkPSJNNDI0LjczNywyMTkuOTk3SDQwMC4wOGMtMi43NjEsMC01LTIuMjM5LTUtNXMyLjIzOS01LDUtNWgyNC42NTdjMi43NjEsMCw1LDIuMjM5LDUsNSBTNDI3LjQ5OSwyMTkuOTk3LDQyNC43MzcsMjE5Ljk5N3oiLz48L2c+PC9nPjxnPjxnPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0xMDguOTU3LDExNC43OTljLTEuNjM2LTguMzkyLTkuMDI5LTE0LjQ4Mi0xNy41NzktMTQuNDgySDcxLjE0M2MtOC41NDksMC0xNS45NDIsNi4wOTEtMTcuNTc5LDE0LjQ4MiBsLTIuMTI4LDEwLjkxM2MtMC4wMTQsMC4wNjktMC4wMjksMC4xMzktMC4wNDUsMC4yMDhsLTEuMTQ5LDQuNzk4aDYxLjc5NWwtMC45NTUtNS4wM0wxMDguOTU3LDExNC43OTl6Ii8+PHBhdGggY2xhc3M9InN0MiIgZD0iTTEzMy4wODgsNUgyNy41NThjLTExLjU4LDAtMjEsOS40Mi0yMSwyMXY4My43MThjMCwxMS41OCw5LjQyLDIxLDIxLDIxaDEyLjQwMWwxLjY4Mi03LjAyNGwyLjEwNy0xMC44MDkgYzIuNTUxLTEzLjA3NywxNC4wNzItMjIuNTY4LDI3LjM5NS0yMi41NjhoMjAuMjM1YzEzLjMyMywwLDI0Ljg0NCw5LjQ5MSwyNy4zOTUsMjIuNTY4bDIuMTI4LDEwLjkxM2wxLjkyLDEwLjExNWwxMC4zNzYsNy44NTQgYzEuNjU4LDEuMjU1LDMuNjI1LDEuODk3LDUuNjEsMS44OTdjMS40MTEsMCwyLjgzMi0wLjMyNSw0LjE1Ni0wLjk4M2MzLjE4Ny0xLjU4NCw1LjE2Ny00Ljc4LDUuMTY3LTguMzM5di05Ljk3OSBjMy44MTItMy45MDQsNS45NTctOS4xMTksNS45NTctMTQuNjQ2VjI2QzE1NC4wODgsMTQuNDIsMTQ0LjY2Nyw1LDEzMy4wODgsNXoiLz48L2c+PGc+PHBhdGggY2xhc3M9InN0NCIgZD0iTTgxLjkxMSwxMDAuMzE3SDgwLjYxYy0xNS4yMTksMC0yNy42LTEyLjM4MS0yNy42LTI3LjZWNjEuMjkxYzAtMTUuMjE5LDEyLjM4MS0yNy42LDI3LjYtMjcuNmgxLjMwMSBjMTUuMjE5LDAsMjcuNiwxMi4zODEsMjcuNiwyNy42djExLjQyNkMxMDkuNTExLDg3LjkzNiw5Ny4xMywxMDAuMzE3LDgxLjkxMSwxMDAuMzE3eiIvPjwvZz48L2c+PC9nPjwvZz48L3N2Zz4=" },
                    ],
                });
                ms.setActionHandler("play", () => {
                    if (player.paused) {
                        play();
                    }
                });
                ms.setActionHandler("pause", () => {
                    if (!player.paused) {
                        play();
                    }
                });
                ms.setActionHandler("seekbackward", () => {
                    player.currentTime -= 30;
                });
                ms.setActionHandler("seekforward", () => {
                    player.currentTime += 30;
                });
            }
        }

        var dur = player.duration;
        document.getElementById("pos").max = dur * 10;

        paras.forEach(e => {
            e.start = e.at / dur;
            e.end = e.atEnd / dur;
        });

        parasReady = true;
        posChanging();

        if (player.newTarget !== null) {
            var temp = player.newTarget;
            player.newTarget = null;
            move(temp);
        }
    }
}

function turnOnWakeLock() {
    if ('wakeLock' in navigator) {
        if (requestWakeLock !== null && wakeLock === null && document.visibilityState === 'visible') {
            requestWakeLock();
        }
    }
}

function turnOffWakeLock() {
    if ('wakeLock' in navigator) {
        if (wakeLock !== null) {
            wakeLock.release().then(() => {
                wakeLock = null;
            });
        }
    }
}

function setupWakeLock() {
    if ('wakeLock' in navigator) {
        requestWakeLock = async () => {
            try {
                wakeLock = await navigator.wakeLock.request('screen');
            } catch (err) { }
        };
    }
}

function windowBlur() {
    if (document.getElementById("dropdown").className == "dropdown showDrop") {
        hideDrop();
    }
}

async function decodeData(value) {
    const b64toBlob = (base64, type = 'application/octet-stream') => 
        fetch(`data:${type};base64,${base64}`).then(res => res.blob());
    const blob = await b64toBlob(value);
    const ds = new DecompressionStream("gzip");
    const decomp = blob.stream().pipeThrough(ds);
    const decoded = await new Response(decomp).blob();
    const text = await decoded.text();
    const parsed = JSON.parse(text);
    parsed['word'] = parsed['word'].split("|");
    return parsed;
}

document.addEventListener("DOMContentLoaded", function(event) {
    player = document.getElementById('player');
    player.newTarget = null;


    var targetPos = null;
    
    if (targetPos === null) {
        try {
            var temp = getParam("start");
            if (temp !== null && temp.length > 0) {
                targetPos = parseFloat(temp) / 10;
            }
        } catch (e) { }
    }
    if (targetPos === null) {
        try {
            var temp = window.location.hash;
            if (temp.length > 1) {
                targetPos = parseFloat(temp.substr(1)) / 10;
            }
        } catch (e) { }
    }
    if (targetPos === null) {
        try {
            var tempID = window.localStorage.getItem('wordID'), 
                tempPos = window.localStorage.getItem('pos');
            if (tempID == wordID) {
                tempPos = parseFloat(tempPos);
                tempPos -= 5;
                if (tempPos > 0) {
                    targetPos = tempPos;
                }
            }
        } catch (e) { }
    }

    player.addEventListener("loadedmetadata", function() {
        playerLoaded();
        if (targetPos !== null) {
            player.currentTime = targetPos;
        }
    });
    player.addEventListener("loadeddata", function() {
        playerLoaded();
    });
    player.addEventListener("timeupdate", function () {
        var at = player.currentTime;
        if (player.paused == playerIsPlaying) {
            player.dispatchEvent(new CustomEvent(player.paused ? 'pause' : 'play'));
        }
        if (!isUserMoving) {
            document.getElementById("pos").value = at * 10;
            posChanging();
        }
        var lastElem = null, 
            highlightTime = 1.0 * player.playbackRate;

        if (lastHighlighted !== null) {
            if (at >= lastHighlighted[0].at && at < lastHighlighted[lastHighlighted.length-1].atEnd) {
                lastElem = lastHighlighted[0];
            } else if (lastHighlighted[lastHighlighted.length-1].hasOwnProperty("next")) {
                var started = lastHighlighted[lastHighlighted.length-1].next, ended = started;

                while (true) {
                    if (at >= started.at && at < ended.atEnd) {
                        lastElem = started;
                        break;
                    }
                    if (ended.atEnd - started.at > highlightTime) {
                        break;
                    }
                    if (ended.hasOwnProperty("next")) {
                        ended = ended.next;
                    } else {
                        break;
                    }
                }
            }
        }
        if (lastElem === null) {
            lastElem = bisect(byTime, e => e.at <= at, false);
        }

        var isIn = false;
        if (lastElem !== null && lastHighlighted !== null) {
            lastHighlighted.forEach((e) => {
                if (e === lastElem) {
                    isIn = true;
                }
            });
        }
        if (lastElem !== null && (lastHighlighted === null || (lastHighlighted !== null && !isIn))) {
            if (at >= 60) {
                window.localStorage.setItem('wordID', wordID);
                window.localStorage.setItem('pos', at);
            }
            var stack = [lastElem];
            lastElem.className = 'current';
            while ((stack[stack.length-1].atEnd - stack[0].at) <= highlightTime && stack[stack.length-1].hasOwnProperty("next")) {
                stack[stack.length-1].next.className = 'current';
                stack.push(stack[stack.length-1].next);
            }
            if (stack.length == 1) {
                stack[0].className = 'current left right';
            } else {
                stack[0].className = 'current left';
                stack[stack.length - 1].className = 'current right';
            }
            if (autoScroll) {
                stack[stack.length-1].scrollIntoView({
                    "block": "nearest",
                    "behavior": "smooth",
                });
            }
            if (lastHighlighted !== null) {
                lastHighlighted.forEach((e) => {
                    e.className = 'word';
                    e.para.className = '';
                });
            }
            stack.forEach((e) => {
                e.para.className = 'current';
            });
            lastHighlighted = stack;
        }
    }, false);

    player.addEventListener('play', function () {
        if (!playerIsPlaying) {
            document.getElementById("playButton").className.baseVal = "playPause pause";
            playerIsPlaying = true;
            turnOnWakeLock();
        }
    });

    player.addEventListener('pause', function () {
        if (playerIsPlaying) {
            document.getElementById("playButton").className.baseVal = "playPause play";
            playerIsPlaying = false;
            turnOffWakeLock();
        }
    });

    decodeData(words).then((words) => {
        var children = [], lastPara = null, lastAt = null, lastHeader = 0;
        for (var i = 0; i < words['word'].length; i++) {
            var at = words['off'][i], word = words['word'][i];
            at += lastAt;
            lastAt = at;
            at /= 100;
            if (word == '') {
                lastPara = document.createElement("p");
                lastPara.at = at;
                lastPara.atEnd = at;
                var temp = document.createElement("span");
                temp.className = "timecode";
                temp.appendChild(document.createTextNode(getTick(at) + ":"));
                lastPara.appendChild(temp);
                children.push(lastPara);
                paras.push(lastPara);
            } else {
                lastPara.children[lastPara.children.length-1].textContent += ' ';
                lastPara.atEnd = at;

                var temp = document.createElement("span");

                if (byTime.length > 0) {
                    byTime[byTime.length - 1].atEnd = at;
                    byTime[byTime.length - 1].next = temp;
                }

                temp.at = at;
                temp.onclick = move;
                temp.className = "word";
                if (word.search(/^[A-Z]: /) == 0) {
                    var speaker = document.createElement("span");
                    speaker.textContent = word.substr(0, 3);
                    speaker.className = "speaker";
                    lastPara.appendChild(speaker);
                    temp.appendChild(document.createTextNode(word.substr(3)));
                } else {
                    temp.appendChild(document.createTextNode(word));
                }
                temp.para = lastPara;
                lastPara.appendChild(temp);
                byTime.push(temp);
            }
        };
        if (byTime.length > 0) {
            byTime[byTime.length - 1].atEnd = at + 3600;
        }
        document.getElementById("pos").max = (lastAt/100) * 10;
        document.getElementById("transcript").append(...children);

        var hidden, visibilityChange;
        if (typeof document.hidden !== "undefined") {
            hidden = "hidden";
            visibilityChange = "visibilitychange";
        } else if (typeof document.msHidden !== "undefined") {
            hidden = "msHidden";
            visibilityChange = "msvisibilitychange";
        } else if (typeof document.webkitHidden !== "undefined") {
            hidden = "webkitHidden";
            visibilityChange = "webkitvisibilitychange";
        }

        function pageAwake() {
            if (wakeLock !== null) {
                wakeLock = null;
                turnOnWakeLock();
            }
            if (lastHighlighted !== null && autoScroll && lastHighlighted.length > 0) {
                lastHighlighted[lastHighlighted.length-1].scrollIntoView({
                    "block": "nearest",
                    "behavior": "smooth",
                });
            }
        }
        document.addEventListener(visibilityChange, () => { 
            if (!document[hidden]) {
                pageAwake();
            }
        });
        document.addEventListener('pageshow', pageAwake);
        document.addEventListener('focus', pageAwake);
        document.addEventListener('scroll', updateScrolls);
        window.addEventListener('blur', windowBlur);
        setupWakeLock();
    });
});
</script>
</head>
<body>

<div class="rows header">
    <svg id="playButton" class="playPause play" width="50" height="50" id="btnPlay" viewBox="-2 -2 108 108" onclick="play()">
        <circle class="forPlay" cx="51" cy="51" r="50" style="stroke-width:1px;stroke:#000;" />
        <line class="forPlay" x1="38" y1="30" x2="38" y2="70" style="stroke-width:8px;stroke:#bbf;stroke-linecap:round;" />
        <path class="forPlay" d="M 38 30 L 70 50 L 38 70" rx="10" ry="10" style="stroke-width:8px;stroke:#bbf;fill:#bbf;stroke-linejoin:round;stroke-linecap:round;" />
        <circle class="forPause" cx="51" cy="51" r="50" style="stroke-width:5px;stroke:#bbf;" />
        <line class="forPause" x1="38" y1="30" x2="38" y2="70" style="stroke-width:8px;stroke:#bbf;stroke-linecap:round;" />
        <path class="forPause" d="M 66 30 L 66 50 L 66 70" rx="10" ry="10" style="stroke-width:8px;stroke:#bbf;fill:#bbf;stroke-linejoin:round;stroke-linecap:round;" />
    </svg>
    <input class="slider fill" type="range" min="0" max="1000" value="0" id="pos" onchange="posChange()" oninput="posChanging()" onmousedown="posMoving()" onmouseup="posMoved()">
    <span id="posText">0:00:00<br><font size="-1">-0:00:00</font></span>
    <span class="link">
        <svg fill="#bbf" stle="width:50px" viewBox="-5 -5 70 70" width="24" height="24" onclick="showLinks()" xmlns="http://www.w3.org/2000/svg" fill-rule="evenodd" clip-rule="evenodd">
            <g transform="matrix(1,0,0,1,-1088,-192)">
                <g>
                    <g transform="matrix(1.50868,0,0,1.01217,70.647,191.772)">
                        <g transform="matrix(0.149202,0,0,0.173437,664.206,42.142)">
                            <rect x="103.288" y="8.535" width="71.218" height="34.133" style="fill-rule:nonzero;"/>
                        </g>
                        <g transform="matrix(0.149202,0,0,0.173437,664.345,27.4)">
                            <rect x="103.288" y="8.535" width="141.366" height="34.133" style="fill-rule:nonzero;"/>
                        </g>
                        <g transform="matrix(0.149202,0,0,0.173437,664.345,12.658)">
                            <rect x="103.288" y="8.535" width="212.447" height="34.133" style="fill-rule:nonzero;"/>
                        </g>
                    </g>
                </g>
            </g>
        </svg>
    </span>
</div>

<div class="content" id="transcript"></div>
<div class="overlay hidden" id="overlay" onclick="hideDrop()"></div>
<div class="dropdown hidden" id="setpos">
    Set position:
    <form action="" onsubmit="return posSelected(event);">
        <input type="text" size="8" autocomplete="off" autocorrect="off" id="enteredPos" inputmode="decimal" value="0:00:00">
        <input type="submit" value="Jump">
    </form>
</div>
<div class="dropdown hidden" id="dropdown">
    <span class="util" onclick="getLink();">Copy link...</span>
    <span class="util" onclick="showPos()" title="Ctrl-S">Set position...</span>
    Options:<br>
    <div style="padding-left: 1em;">
        <span class="util sel" id="click_to_jump" onclick="onClickToJump()">Jump on click</span>
        <span class="util sel" id="auto_scroll" onclick="onAutoScroll()">Auto scroll</span>
    </div>
    Playback speed:<br>
    <div style="padding-left: 1em;">
        <span class="util nosel" id="speed_0_5" onclick="setSpeed(0.5, '0_5')">0.50x</span>
        <span class="util sel" id="speed_1_0" onclick="setSpeed(1, '1_0')">1.00x</span>
        <span class="util nosel" id="speed_1_25" onclick="setSpeed(1.25, '1_25')">1.25x</span>
        <span class="util nosel" id="speed_1_5" onclick="setSpeed(1.5, '1_5')">1.50x</span>
        <span class="util nosel" id="speed_1_75" onclick="setSpeed(1.75, '1_75')">1.75x</span>
        <span class="util nosel" id="speed_2_0" onclick="setSpeed(2, '2_0')">2.00x</span>
        <span class="util nosel" id="speed_2_5" onclick="setSpeed(2.5, '2_5')">2.50x</span>
        <span class="util nosel" id="speed_3_0" onclick="setSpeed(3, '3_0')">3.00x</span>
    </div>
    Font size:<br>
    <div style="padding-left: 1em;">
        <span class="util sel" id="size_100" onclick="setSize(100, '100')">100%</span>
        <span class="util nosel" id="size_125" onclick="setSize(125, '125')">125%</span>
        <span class="util nosel" id="size_150" onclick="setSize(150, '150')">150%</span>
        <span class="util nosel" id="size_200" onclick="setSize(200, '200')">200%</span>
    </div>
</div>

<audio id="player" preload="metadata"><source x_src_data="start" src="{{MP3_NAME}}" x_src_data="end"></audio>

</body>
</html>
